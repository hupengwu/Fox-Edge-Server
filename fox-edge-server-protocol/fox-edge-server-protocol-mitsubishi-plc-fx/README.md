# fox-edge-server-protocol-mitsubishi-plc-fx

#### 介绍

``` 
三菱的FX系列的PLC
``` 

#### 协议特点

``` 
一.三菱Fx系列PLC编程口通讯协议地址算法
三菱PLC编程口通讯协议三菱PLC编程口的通讯协议只有四个命令：

命令	命令码	目标设备
DEVICE READ CMD  “0”	X,Y,M,S,T,C,D
DEVICE WRITE CMD “1”	X,Y,M,S,T,C,D
FORCE ON CMD     “7”	X,Y,M,S,T,C
FORCE OFF CMD    “8”	X,Y,M,S,T,C

五个标示：
ENQ	05H	请求
ACK	06H	PLC正确响应
NAK	15H	PLC错误响应
STX	02H	报文开始
ETX	03H	报文结束

三菱Fx系列PLC地址对应表
由于没有寄存器类型信息，所以地址的计算十分关键，如D100和M100分别对应哪个地址呢？
当我们用DEVICE READ命令时，D100地址=100*2+4096；M100地址=100+256；不同的是D类型寄存器存放的是字，M寄存器存放的是位，同样是读两个字节，D100返回的就是PLC中D100地址的值，M类型寄存器返回的是M100到M116的值。所以当我们用FORCE ON 命令时，M100寄存器地址=100+2048；
但三菱公司好像不甘于如此，FORCE ON/Off命令中地址排列与DEVICE READ/WRITE不同，是低位在前高位在后。如Y20，地址是0510H，代码中4个字节地址表示为：1005。（注意：Y寄存器为八进制，如Y20地址=16+1280=0510H）

``` 

#### 报文样例

``` 
[17:18:38.339]发→◇02 31 31 30 46 36 30 34 33 34 31 32 43 44 41 42 03 34 39 □

[17:18:38.370]收←◆06

[17:19:32.687]发→◇02 30 31 30 46 36 30 34 33 34 03 37 34 □

[17:19:32.725]收←◆02 33 34 31 32 43 44 41 42 03 44 37 
此时读取的数据即写入的数据1234，ABCD
``` 
